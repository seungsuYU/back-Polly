<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>게시물 작성</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
<h1>게시물 작성</h1>
<form id="postForm">
  <label for="title">제목:</label>
  <input type="text" id="title" name="title" required><br>

  <label for="content">내용:</label>
  <textarea id="content" name="content" required></textarea><br>

  <label for="author">작성자:</label>
  <input type="text" id="author" name="author" required><br>

  <button type="submit">게시물 작성</button>
</form>

<script>
  $(document).ready(function() {
      $('#postForm').on('submit', function(event) {
          event.preventDefault(); // 기본 폼 제출 방지

          const postData = {
              title: $('#title').val(),
              content: $('#content').val(),
              author: $('#author').val()
          };

          $.ajax({
              type: 'POST',
              url: '/post/create',
              contentType: 'application/json',
              data: JSON.stringify(postData),
              success: function() {
                  window.location.href = '/post/All'; // 성공 시 이동
              },
              error: function(xhr, status, error) {
                  alert('게시물 생성 실패: ' + xhr.responseText); // 오류 처리
              }
          });
      });
  });
</script>
</body>
</html>
